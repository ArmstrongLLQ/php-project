<?php
    require_once 'SqlHelper.class.php';
    //该类是业务逻辑类，完成对doaj表的操作
    // 一个函数获取总共有多少页，
    class DoajService{
        public function getPageCount($pagesize){
           $sql = "select count(id) from doaj_data";
           $sql_helper = new SqlHelper();
           $result = $sql_helper->executeDql($sql);
           
           if ($row = mysqli_fetch_row($result)){
               $page_count = ceil($row[0] / $pagesize);
           }
           
           mysqli_free_result($result);
           $sql_helper->closeConnect();
           
           return $page_count;
        }
        
        // 一个函数获取应当显示的数据
        public function getDoajData($page_now, $pagesize){
            $sql = "select * from doaj_data order by id limit ".($page_now - 1) * $pagesize.",".$pagesize; 
            $sql_helper = new SqlHelper();
            $result = $sql_helper->executeDql($sql);
            
            return $result;
            
        }
        
    }
?>